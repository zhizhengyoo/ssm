<!--Top-->
<script>
    function loadNavs() {
        $.ajax({
            type: "POST",
            url: "${base.contextPath}/nav",
            contentType:'application/json',
            dataType: "json",
            success: function(data){
                data.firstLevel.map(function (dataItem) {
                    data.secondLevel.map(function (dataItem2) {
                        if (dataItem.categoryId == dataItem2.parentCId){
                            if($("#"+dataItem.categoryId).size() == 0){
                                $("#navBar").append('<li id="'+dataItem.categoryId+'" class="dropdown">' +
                                        '<a href="#" class="dropdown-toggle" >'+dataItem.categoryName+'</a></li>');
                            }
                           if ($("#"+dataItem.categoryId+" a div").size() == 0){
                                $("#"+dataItem.categoryId+" a").append('<div class="dropdown-menu">' +
                                        '<div class="dropdown-inner">' +
                                        '<ul class="list-unstyled">' +
                                        '</ul></div></div>')
                            }
                            $("#"+dataItem.categoryId+" a div div ul").append('<li><a href="${base.contextPath}/bookShow/'
                                    +dataItem2.categoryId+'">'+dataItem2.categoryName+'</a></li>');
                        }
                    });
                    if($("#"+dataItem.categoryId).size()==0){
                        $("#navBar").append('<li id="'+dataItem.categoryId+'">' +
                                '<a href="${base.contextPath}/bookShow/'+dataItem.categoryId+'">'+dataItem.categoryName+'</a></li>');
                    }
                });
            },
            error:function (e) {
                debugger;
            }
        });
    }
    loadNavs();
</script>
<nav id="top">
    <div class="container">
        <div class="row">
            <div class="col-xs-6">
                <a href="${base.contextPath}/account_seller"><span class="glyphicon glyphicon-home"></span>  &nbsp;卖家中心</a>
            </div>
            <div class="col-xs-6">

                <ul class="top-link">
                    <#if login_success??>
                        <li><a id="userInfo" href="${base.contextPath}/account"><span class="glyphicon glyphicon-user"></span> &nbsp; ${login_success.userName!"未命名"}</a></li>
                        <li><a id="logout" href="${base.contextPath}/logout">退出</a></li>
                        <#else>
                            <li><a id="loginBtn" data-toggle="modal">登录</a></li>
                            <li><a href="${base.contextPath}/reg">注册</a></li>
                    </#if>

                </ul>
            </div>
        </div>
    </div>
</nav>
<script>
    $('#loginBtn').click(function (e) {
        $('#loginModal').modal('toggle');
        $('#loginTab a[href="#loginDiv"]').tab('show')
    })
    $('#signinBtn').click(function (e) {
        $('#loginModal').modal('toggle');
        $('#loginTab a[href="#signin"]').tab('show')
    })
</script>
<!-- loginModal -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 450px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">登录</h4>
            </div>
            <div class="modal-body">
                <form method="post" action="${base.contextPath}/logins" class="form-horizontal">
                    <div class="form-group">
                        <label for="userNameLogin" class="col-sm-2 control-label">手机</label>
                        <div class="col-sm-9">
                            <input name="userName" class="form-control" id="userNameLogin" placeholder="手机">
                        </div>
                    </div>
                    <div class="form-group" style="margin-top:25px">
                        <label for="passwordLogin" class="col-sm-2 control-label">密码</label>
                        <div class="col-sm-9">
                            <input name="password" type="password" class="form-control" id="passwordLogin" placeholder="密码">
                        </div>
                    </div>
                    <div class="form-group" style="margin-top:25px">
                        <div class="col-sm-7" style="text-align: right">
                            <button type="submit" class="btn btn-default">登录</button>
                        </div>
                        <div class="col-sm-5" style="padding-top: 8px">
                            <span>没有账号？点击<a href="${base.contextPath}/reg" style="color: #0c80df">注册</a></span>
                        </div>
                    </div>
                </form>
            </div>
           <!-- <div class="modal-body tab-content">
                <ul id="loginTab" class="nav nav-tabs">
                    <li class="active">
                        <a href="#loginDiv" data-toggle="tab">登录
                        </a>
                    </li>
             &lt;!&ndash;       <li><a href="#signin" data-toggle="tab">注册</a></li>&ndash;&gt;
                </ul>
                <div id="myTabContent" class="tab-content">

                    <div class="tab-pane fade in active" id="loginDiv">
                        <form method="post" action="${base.contextPath}/logins" class="form-horizontal">
                            <div class="form-group">
                                <label for="userNameLogin" class="col-sm-3 control-label">手机</label>
                                <div class="col-sm-9">
                                    <input name="userName" class="form-control" id="userNameLogin" placeholder="手机">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="passwordLogin" class="col-sm-3 control-label">密码</label>
                                <div class="col-sm-9">
                                    <input name="password" type="password" class="form-control" id="passwordLogin" placeholder="密码">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-8" style="text-align: center">
                                    <button type="submit" class="btn btn-default">登录</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="signin">
                        <form id="signForm" method="post" action="${base.contextPath}/register" class="form-horizontal">
                            <div class="form-group">
                                <div class="dropdown col-sm-4">
                                    <select id="signinMode" class="form-control">
                                        <option value="phone">手机号</option>
                                        <option value="email">邮箱</option>
                                    </select>
                                </div>
                                <div id="signUnique" class="col-sm-8">
                                    <input class="form-control" id="phone" name="phone" placeholder="手机号">
                                    <input style="display: none" class="form-control" id="email" name="email" placeholder="邮箱">
                                </div>
                            </div>
                            <script>
                                $("#signinMode").change(function(){
                                    var signMode = $("#signinMode option:selected").val();
                                    if(signMode == "phone"){
                                        $("#email").css('display','none');
                                        $("#phone").css('display','block');
                                    }else{
                                        $("#phone").css('display','none');
                                        $("#email").css('display','block');
                                    }
                                });
                            </script>
                            <div class="form-group">
                                <label for="userName" class="col-sm-3 control-label">手机号</label>
                                <div class="col-sm-9">
                                    <input class="form-control" id="phone" name="phone" placeholder="手机号" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="userName" class="col-sm-3 control-label">用户名</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" name="userName" id="userName" placeholder="用户名">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">密码</label>
                                <div class="col-sm-9">
                                    <input type="password" name="password" class="form-control" id="inputPassword4" placeholder="密码">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">确认密码</label>
                                <div class="col-sm-9">
                                    <input type="password" name="password" class="form-control" placeholder="密码">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">认证信息</label>
                                <div class="col-sm-9">
                                    <input type="file" name="file" class="form-control"  />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12" style="text-align: center">
                                    <button type="submit" class="btn btn-default">注册</button>
                                    <button type="reset" class="btn btn-default">重置</button>
                                </div>

                            </div>
                        </form>
                        <script>
                             function onSigninSubmit(e){
                                 var data={};
                                 $("#signForm").serializeArray().map(function(x){data[x.name]=x.value;});
                                 $.ajax({
                                     type: "POST",
                                     url:"register",
                                     dataType: "json",
                                     contentType: "application/json",
                                     data:JSON.stringify(data),// 你的formid
                                     //async: false,
                                     error: function(request) {
                                         alert("Connection error");
                                     },
                                     success: function(data) {
                                         debugger;
                                     }
                                 });
                             }
                         </script>
                    </div>
                </div>

                <div style="clear:both;"></div>
            </div>-->
            <!--<div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>-->
        </div>
    </div>
</div>

<!--Header-->
<header class="container">
    <div class="row">
        <div class="col-md-4">
            <div id="logo"><a href="${base.contextPath}/home"><img src="${base.contextPath}/static/images/logo12.png" /></a></div>
        </div>
        <div class="col-md-4">
            <form class="form-search">
                <input type="text" class="form-control col-md-8" placeholder="Text input">
                <button type="submit" class="btn"><span class="glyphicon glyphicon-search"></span></button>
            </form>
        </div>
        <div class="col-md-4">
            <div id="cart"><a class="btn btn-1" href="${base.contextPath}/shoppingCart"><span class="glyphicon glyphicon-shopping-cart"></span>  查看购物车</a></div>
        </div>
    </div>
</header>

<!--Navigation-->
<nav id="menu" class="navbar">
    <div class="container">
        <div class="navbar-header"><span id="heading" class="visible-xs">Categories</span>
            <button type="button" class="btn btn-navbar navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"><i class="fa fa-bars"></i></button>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul id="navBar" class="nav navbar-nav">
                <li><a href="index.html">首页</a></li>

                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Mobiles &amp; Tablet</a>
                    <div class="dropdown-menu" style="margin-left: -203.625px;">
                        <div class="dropdown-inner">
                            <ul class="list-unstyled">
                                <li><a href="category.html">Iphone</a></li>
                                <li><a href="category.html">Samsung</a></li>
                                <li><a href="category.html">Nokia</a></li>
                                <li><a href="category.html">Lenovo</a></li>
                                <li><a href="category.html">Google</a></li>
                            </ul>
                            <ul class="list-unstyled">
                                <li><a href="category.html">Nexus</a></li>
                                <li><a href="category.html">Dell</a></li>
                                <li><a href="category.html">Oppo</a></li>
                                <li><a href="category.html">Blackberry</a></li>
                                <li><a href="category.html">HTC</a></li>
                            </ul>
                            <ul class="list-unstyled">
                                <li><a href="category.html">LG</a></li>
                                <li><a href="category.html">Q-Mobiles</a></li>
                                <li><a href="category.html">Sony</a></li>
                                <li><a href="category.html">Wiko</a></li>
                                <li><a href="category.html">T&T</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>